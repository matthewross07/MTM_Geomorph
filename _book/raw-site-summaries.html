<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Raw site summaries | Methods for: Identifying geomorphic process domains in synthetic landscapes of West Virginia, USA</title>
  <meta name="description" content="5 Raw site summaries | Methods for: Identifying geomorphic process domains in synthetic landscapes of West Virginia, USA" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Raw site summaries | Methods for: Identifying geomorphic process domains in synthetic landscapes of West Virginia, USA" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Raw site summaries | Methods for: Identifying geomorphic process domains in synthetic landscapes of West Virginia, USA" />
  
  
  

<meta name="author" content="Dr. Matthew Ross and Dr. Kristin Jaeger" />
<meta name="author" content="matt.ross(at)colostate.edu" />


<meta name="date" content="2020-08-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="analysis-and-figures.html"/>
<link rel="next" href="process-zones-with-slope-area-and-cumulative-area-distribution.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="terrain-analyses-using-taudem.html"><a href="terrain-analyses-using-taudem.html"><i class="fa fa-check"></i><b>1</b> Terrain analyses using TauDEM</a><ul>
<li class="chapter" data-level="1.1" data-path="terrain-analyses-using-taudem.html"><a href="terrain-analyses-using-taudem.html#pit-remove"><i class="fa fa-check"></i><b>1.1</b> Pit remove</a></li>
<li class="chapter" data-level="1.2" data-path="terrain-analyses-using-taudem.html"><a href="terrain-analyses-using-taudem.html#d8"><i class="fa fa-check"></i><b>1.2</b> D8</a><ul>
<li class="chapter" data-level="1.2.1" data-path="terrain-analyses-using-taudem.html"><a href="terrain-analyses-using-taudem.html#flow-direction-with-slope-and-flow-direction"><i class="fa fa-check"></i><b>1.2.1</b> Flow direction with slope and flow direction</a></li>
<li class="chapter" data-level="1.2.2" data-path="terrain-analyses-using-taudem.html"><a href="terrain-analyses-using-taudem.html#flow-accumulation"><i class="fa fa-check"></i><b>1.2.2</b> Flow accumulation</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="terrain-analyses-using-taudem.html"><a href="terrain-analyses-using-taudem.html#d-infinity"><i class="fa fa-check"></i><b>1.3</b> D-Infinity</a><ul>
<li class="chapter" data-level="1.3.1" data-path="terrain-analyses-using-taudem.html"><a href="terrain-analyses-using-taudem.html#flowdir"><i class="fa fa-check"></i><b>1.3.1</b> Flowdir</a></li>
<li class="chapter" data-level="1.3.2" data-path="terrain-analyses-using-taudem.html"><a href="terrain-analyses-using-taudem.html#flow-accumulation-1"><i class="fa fa-check"></i><b>1.3.2</b> Flow accumulation</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="terrain-analyses-using-taudem.html"><a href="terrain-analyses-using-taudem.html#stream-detection"><i class="fa fa-check"></i><b>1.4</b> Stream detection</a><ul>
<li class="chapter" data-level="1.4.1" data-path="terrain-analyses-using-taudem.html"><a href="terrain-analyses-using-taudem.html#threshold-1000-pixels-0.1-km2"><i class="fa fa-check"></i><b>1.4.1</b> Threshold 1000 pixels = 0.1 km2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="identifying-heavily-mined-watersheds.html"><a href="identifying-heavily-mined-watersheds.html"><i class="fa fa-check"></i><b>2</b> Identifying heavily mined watersheds</a><ul>
<li class="chapter" data-level="2.1" data-path="identifying-heavily-mined-watersheds.html"><a href="identifying-heavily-mined-watersheds.html#project-outlets-with-same-projection-as-rasters"><i class="fa fa-check"></i><b>2.1</b> Project outlets with same projection as rasters</a><ul>
<li class="chapter" data-level="2.1.1" data-path="identifying-heavily-mined-watersheds.html"><a href="identifying-heavily-mined-watersheds.html#convert-river-network-into-shapefile"><i class="fa fa-check"></i><b>2.1.1</b> Convert river network into shapefile</a></li>
<li class="chapter" data-level="2.1.2" data-path="identifying-heavily-mined-watersheds.html"><a href="identifying-heavily-mined-watersheds.html#reproject-outlets-to-same-projection-as-rasters"><i class="fa fa-check"></i><b>2.1.2</b> Reproject outlets to same projection as rasters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="delineate-watersheds-for-analysis.html"><a href="delineate-watersheds-for-analysis.html"><i class="fa fa-check"></i><b>3</b> Delineate watersheds for analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="delineate-watersheds-for-analysis.html"><a href="delineate-watersheds-for-analysis.html#stack-and-cutup-rasters-to-smaller-extents-for-later-analysis-in-r."><i class="fa fa-check"></i><b>3.1</b> Stack and cutup rasters to smaller extents for later analysis in r.</a></li>
<li class="chapter" data-level="3.2" data-path="delineate-watersheds-for-analysis.html"><a href="delineate-watersheds-for-analysis.html#convert-raster-data-to-data-frames"><i class="fa fa-check"></i><b>3.2</b> Convert raster data to data frames</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="analysis-and-figures.html"><a href="analysis-and-figures.html"><i class="fa fa-check"></i><b>4</b> Analysis and Figures</a><ul>
<li class="chapter" data-level="4.1" data-path="analysis-and-figures.html"><a href="analysis-and-figures.html#a-note-on-proj-4-and-proj-6"><i class="fa fa-check"></i><b>4.1</b> A note on PROJ 4 and PROJ 6</a></li>
<li class="chapter" data-level="4.2" data-path="analysis-and-figures.html"><a href="analysis-and-figures.html#data-prep"><i class="fa fa-check"></i><b>4.2</b> Data Prep</a><ul>
<li class="chapter" data-level="4.2.1" data-path="analysis-and-figures.html"><a href="analysis-and-figures.html#convert-data-to-long-format"><i class="fa fa-check"></i><b>4.2.1</b> Convert data to long format</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="analysis-and-figures.html"><a href="analysis-and-figures.html#figure-1---mining-demonstration"><i class="fa fa-check"></i><b>4.3</b> Figure 1 - Mining demonstration</a></li>
<li class="chapter" data-level="4.4" data-path="analysis-and-figures.html"><a href="analysis-and-figures.html#figure-3-study-map"><i class="fa fa-check"></i><b>4.4</b> Figure 3 Study Map</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="raw-site-summaries.html"><a href="raw-site-summaries.html"><i class="fa fa-check"></i><b>5</b> Raw site summaries</a><ul>
<li class="chapter" data-level="5.1" data-path="raw-site-summaries.html"><a href="raw-site-summaries.html#percent-mining"><i class="fa fa-check"></i><b>5.1</b> Percent mining</a><ul>
<li class="chapter" data-level="5.1.1" data-path="raw-site-summaries.html"><a href="raw-site-summaries.html#elevation"><i class="fa fa-check"></i><b>5.1.1</b> Elevation</a></li>
<li class="chapter" data-level="5.1.2" data-path="raw-site-summaries.html"><a href="raw-site-summaries.html#slope"><i class="fa fa-check"></i><b>5.1.2</b> Slope</a></li>
<li class="chapter" data-level="5.1.3" data-path="raw-site-summaries.html"><a href="raw-site-summaries.html#drainage-density"><i class="fa fa-check"></i><b>5.1.3</b> Drainage density</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="raw-site-summaries.html"><a href="raw-site-summaries.html#total-summary"><i class="fa fa-check"></i><b>5.2</b> Total summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="process-zones-with-slope-area-and-cumulative-area-distribution.html"><a href="process-zones-with-slope-area-and-cumulative-area-distribution.html"><i class="fa fa-check"></i><b>6</b> Process Zones with Slope Area and Cumulative Area Distribution</a><ul>
<li class="chapter" data-level="6.1" data-path="process-zones-with-slope-area-and-cumulative-area-distribution.html"><a href="process-zones-with-slope-area-and-cumulative-area-distribution.html#uaa-slope-cutting"><i class="fa fa-check"></i><b>6.1</b> UAA Slope Cutting</a><ul>
<li class="chapter" data-level="6.1.1" data-path="process-zones-with-slope-area-and-cumulative-area-distribution.html"><a href="process-zones-with-slope-area-and-cumulative-area-distribution.html#slope-area-standard-deviation-plots"><i class="fa fa-check"></i><b>6.1.1</b> Slope Area Standard Deviation Plots</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="process-zones-with-slope-area-and-cumulative-area-distribution.html"><a href="process-zones-with-slope-area-and-cumulative-area-distribution.html#sa-break-id"><i class="fa fa-check"></i><b>6.2</b> SA Break ID</a><ul>
<li class="chapter" data-level="6.2.1" data-path="process-zones-with-slope-area-and-cumulative-area-distribution.html"><a href="process-zones-with-slope-area-and-cumulative-area-distribution.html#region-slopes"><i class="fa fa-check"></i><b>6.2.1</b> Region slopes</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="process-zones-with-slope-area-and-cumulative-area-distribution.html"><a href="process-zones-with-slope-area-and-cumulative-area-distribution.html#figure-4---sa-plots"><i class="fa fa-check"></i><b>6.3</b> Figure 4 - SA Plots</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="cumulative-area-distribution.html"><a href="cumulative-area-distribution.html"><i class="fa fa-check"></i><b>7</b> Cumulative area distribution</a><ul>
<li class="chapter" data-level="7.1" data-path="cumulative-area-distribution.html"><a href="cumulative-area-distribution.html#cad-breaks"><i class="fa fa-check"></i><b>7.1</b> Cad breaks</a></li>
<li class="chapter" data-level="7.2" data-path="cumulative-area-distribution.html"><a href="cumulative-area-distribution.html#uaa-density"><i class="fa fa-check"></i><b>7.2</b> UAA Density</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="energy-index.html"><a href="energy-index.html"><i class="fa fa-check"></i><b>8</b> Energy Index</a><ul>
<li class="chapter" data-level="8.1" data-path="energy-index.html"><a href="energy-index.html#figure-6-ei-plots"><i class="fa fa-check"></i><b>8.1</b> Figure 6 EI Plots</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="d-plots.html"><a href="d-plots.html"><i class="fa fa-check"></i><b>9</b> 3D plots</a><ul>
<li class="chapter" data-level="9.1" data-path="d-plots.html"><a href="d-plots.html#terrain-metric-drape"><i class="fa fa-check"></i><b>9.1</b> Terrain metric drape</a></li>
<li class="chapter" data-level="9.2" data-path="d-plots.html"><a href="d-plots.html#draping-zones-over-dem"><i class="fa fa-check"></i><b>9.2</b> Draping zones over DEM</a></li>
<li class="chapter" data-level="9.3" data-path="d-plots.html"><a href="d-plots.html#distribution-of-process-zones-by-site"><i class="fa fa-check"></i><b>9.3</b> Distribution of process zones by site</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="table-of-stats-by-zone.html"><a href="table-of-stats-by-zone.html"><i class="fa fa-check"></i><b>10</b> Table of stats by zone</a></li>
<li class="chapter" data-level="11" data-path="statistical-tests.html"><a href="statistical-tests.html"><i class="fa fa-check"></i><b>11</b> Statistical tests</a></li>
<li class="chapter" data-level="12" data-path="supplemental-informatino.html"><a href="supplemental-informatino.html"><i class="fa fa-check"></i><b>12</b> Supplemental informatino</a></li>
<li class="chapter" data-level="13" data-path="supplement-way-too-much-detail.html"><a href="supplement-way-too-much-detail.html"><i class="fa fa-check"></i><b>13</b> Supplement way too much detail</a><ul>
<li class="chapter" data-level="13.1" data-path="supplement-way-too-much-detail.html"><a href="supplement-way-too-much-detail.html#check-for-differences-between-flow-direction-algorithm-f8-or-f.infinity"><i class="fa fa-check"></i><b>13.1</b> Check for differences between flow direction algorithm (f8 or f.infinity)</a><ul>
<li class="chapter" data-level="13.1.1" data-path="supplement-way-too-much-detail.html"><a href="supplement-way-too-much-detail.html#flow-direction-differnces-in-uplsope-accumulated-area-uaa-for-reference-sites"><i class="fa fa-check"></i><b>13.1.1</b> Flow direction differnces in Uplsope Accumulated Area (UAA) for reference sites</a></li>
<li class="chapter" data-level="13.1.2" data-path="supplement-way-too-much-detail.html"><a href="supplement-way-too-much-detail.html#flow-direction-differences-in-slope"><i class="fa fa-check"></i><b>13.1.2</b> Flow Direction Differences in Slope</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Methods for: Identifying geomorphic process domains in synthetic landscapes of West Virginia, USA</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="raw-site-summaries" class="section level1">
<h1><span class="header-section-number">5</span> Raw site summaries</h1>
<p>Summary statistics (median elevation, total relief, etc…) for each watershed.</p>
<div id="percent-mining" class="section level2">
<h2><span class="header-section-number">5.1</span> Percent mining</h2>
<p>While we attempted to capture control watersheds that were entirely unmined and mined watersheds that were &gt; 80% mined, there is still variation around the amount of mining in each watershed. Here we use data from a paper by Andrew Pericack and others to find when and where mining occured and we use that layer to asses the mining coverage in each watershed as of 2011, when the post-mining watersheds were generated.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="raw-site-summaries.html#cb17-1"></a><span class="co">#Read in mining detection layer from Pericack et al., 2018</span></span>
<span id="cb17-2"><a href="raw-site-summaries.html#cb17-2"></a>first.mined &lt;-<span class="st"> </span><span class="kw">raster</span>(<span class="st">&#39;data/in/FirstMinedCamp.tif&#39;</span>) </span>
<span id="cb17-3"><a href="raw-site-summaries.html#cb17-3"></a></span>
<span id="cb17-4"><a href="raw-site-summaries.html#cb17-4"></a><span class="co">#The first raster in the list of rasters (all list) is the elevation profile</span></span>
<span id="cb17-5"><a href="raw-site-summaries.html#cb17-5"></a><span class="co">#of the current watershed delineation. Use this to get % mining for each site</span></span>
<span id="cb17-6"><a href="raw-site-summaries.html#cb17-6"></a></span>
<span id="cb17-7"><a href="raw-site-summaries.html#cb17-7"></a><span class="co">#Use foreach to speedup the operation. Using 3 cores instead of one</span></span>
<span id="cb17-8"><a href="raw-site-summaries.html#cb17-8"></a>cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="dv">8</span>)</span>
<span id="cb17-9"><a href="raw-site-summaries.html#cb17-9"></a><span class="co">#Register the cores (starts independent R Sessions)</span></span>
<span id="cb17-10"><a href="raw-site-summaries.html#cb17-10"></a><span class="kw">registerDoParallel</span>(cl,<span class="dt">cores=</span><span class="dv">8</span>)</span>
<span id="cb17-11"><a href="raw-site-summaries.html#cb17-11"></a><span class="co">#Run a foreach loop that stores results in a list (pmine.list)</span></span>
<span id="cb17-12"><a href="raw-site-summaries.html#cb17-12"></a>pmine.list &lt;-<span class="st"> </span><span class="kw">foreach</span>(<span class="dt">i=</span><span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(all.list)) <span class="op">%dopar%</span><span class="st"> </span>{</span>
<span id="cb17-13"><a href="raw-site-summaries.html#cb17-13"></a>  <span class="co">#Have to load in the important libraries for each session</span></span>
<span id="cb17-14"><a href="raw-site-summaries.html#cb17-14"></a>  <span class="kw">library</span>(raster)</span>
<span id="cb17-15"><a href="raw-site-summaries.html#cb17-15"></a>  <span class="kw">library</span>(tidyverse)</span>
<span id="cb17-16"><a href="raw-site-summaries.html#cb17-16"></a>  <span class="kw">library</span>(rgeos)</span>
<span id="cb17-17"><a href="raw-site-summaries.html#cb17-17"></a>  <span class="co">#Read in the raw elevation profile (first in the list)</span></span>
<span id="cb17-18"><a href="raw-site-summaries.html#cb17-18"></a>  ras.raw &lt;-<span class="st"> </span>all.list[[i]][[<span class="dv">1</span>]] </span>
<span id="cb17-19"><a href="raw-site-summaries.html#cb17-19"></a>  <span class="co">#Project the raster into the first.mined raster projection</span></span>
<span id="cb17-20"><a href="raw-site-summaries.html#cb17-20"></a>  ras &lt;-<span class="st">  </span><span class="kw">projectRaster</span>(ras.raw,<span class="dt">crs=</span><span class="kw">projection</span>(first.mined)) </span>
<span id="cb17-21"><a href="raw-site-summaries.html#cb17-21"></a>  <span class="co">#Crop the mined raster</span></span>
<span id="cb17-22"><a href="raw-site-summaries.html#cb17-22"></a>  mine.ras &lt;-<span class="st"> </span>first.mined <span class="op">%&gt;%</span></span>
<span id="cb17-23"><a href="raw-site-summaries.html#cb17-23"></a><span class="st">    </span><span class="kw">crop</span>(.,ras) </span>
<span id="cb17-24"><a href="raw-site-summaries.html#cb17-24"></a>  <span class="co">#Project the raster resolution onto the mine resolution (from 10 to 30m)</span></span>
<span id="cb17-25"><a href="raw-site-summaries.html#cb17-25"></a>  ras.res &lt;-<span class="st"> </span><span class="kw">projectRaster</span>(ras,mine.ras)</span>
<span id="cb17-26"><a href="raw-site-summaries.html#cb17-26"></a>  <span class="co">#Mask out the areas outside of the watershed</span></span>
<span id="cb17-27"><a href="raw-site-summaries.html#cb17-27"></a>  mine.mask &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw">mask</span>(mine.ras,ras.res)</span>
<span id="cb17-28"><a href="raw-site-summaries.html#cb17-28"></a>  <span class="co">#Get the number of mined pixels </span></span>
<span id="cb17-29"><a href="raw-site-summaries.html#cb17-29"></a>  ras.area =<span class="st"> </span><span class="kw">length</span>(ras.res[<span class="op">!</span><span class="kw">is.na</span>(ras.res)])</span>
<span id="cb17-30"><a href="raw-site-summaries.html#cb17-30"></a>  <span class="co">#Get the percent mining (mined pixels/total pixels)</span></span>
<span id="cb17-31"><a href="raw-site-summaries.html#cb17-31"></a>  mine.area =<span class="st"> </span><span class="kw">length</span>(mine.mask[mine.mask <span class="op">&lt;</span><span class="st"> </span><span class="dv">2012</span>])</span>
<span id="cb17-32"><a href="raw-site-summaries.html#cb17-32"></a>  pmine=mine.area<span class="op">/</span>ras.area</span>
<span id="cb17-33"><a href="raw-site-summaries.html#cb17-33"></a>  <span class="co">#Store this as a data frame. </span></span>
<span id="cb17-34"><a href="raw-site-summaries.html#cb17-34"></a>  dat &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">pmine=</span>pmine,</span>
<span id="cb17-35"><a href="raw-site-summaries.html#cb17-35"></a>                <span class="dt">Site=</span><span class="kw">names</span>(all.list)[[i]],</span>
<span id="cb17-36"><a href="raw-site-summaries.html#cb17-36"></a>                <span class="dt">area=</span><span class="kw">round</span>(<span class="kw">length</span>(ras.raw[<span class="op">!</span><span class="kw">is.na</span>(ras.raw)])<span class="op">*</span><span class="dv">100</span><span class="op">/</span>(<span class="dv">1000</span><span class="op">*</span><span class="dv">1000</span>),<span class="dv">1</span>))</span>
<span id="cb17-37"><a href="raw-site-summaries.html#cb17-37"></a>}</span>
<span id="cb17-38"><a href="raw-site-summaries.html#cb17-38"></a><span class="co">#End the foreach loop</span></span>
<span id="cb17-39"><a href="raw-site-summaries.html#cb17-39"></a><span class="kw">stopCluster</span>(cl)</span>
<span id="cb17-40"><a href="raw-site-summaries.html#cb17-40"></a></span>
<span id="cb17-41"><a href="raw-site-summaries.html#cb17-41"></a><span class="co">#Cast the data into a sensible data frame </span></span>
<span id="cb17-42"><a href="raw-site-summaries.html#cb17-42"></a>pmine.dat &lt;-<span class="st"> </span><span class="kw">do.call</span>(<span class="st">&#39;rbind&#39;</span>,pmine.list) <span class="op">%&gt;%</span></span>
<span id="cb17-43"><a href="raw-site-summaries.html#cb17-43"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Site=</span><span class="kw">gsub</span>(<span class="st">&#39;WhiteRef&#39;</span>,<span class="st">&#39;WhiteOakRef&#39;</span>,Site)) <span class="op">%&gt;%</span></span>
<span id="cb17-44"><a href="raw-site-summaries.html#cb17-44"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pmine=</span><span class="kw">round</span>(pmine,<span class="dv">2</span>)<span class="op">*</span><span class="dv">100</span>) <span class="op">%&gt;%</span></span>
<span id="cb17-45"><a href="raw-site-summaries.html#cb17-45"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Site,pmine) <span class="op">%&gt;%</span></span>
<span id="cb17-46"><a href="raw-site-summaries.html#cb17-46"></a><span class="st">  </span><span class="kw">arrange</span>(Site)</span></code></pre></div>
<div id="elevation" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Elevation</h3>
<p>The elevation profiles of the watersheds change following mining. Summary statistics on changes are calculated here.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="raw-site-summaries.html#cb18-1"></a><span class="co">#Summarize stats by watershed. </span></span>
<span id="cb18-2"><a href="raw-site-summaries.html#cb18-2"></a>elev.summary &lt;-<span class="st"> </span>long.df <span class="op">%&gt;%</span></span>
<span id="cb18-3"><a href="raw-site-summaries.html#cb18-3"></a><span class="st">  </span><span class="kw">filter</span>(Data <span class="op">==</span><span class="st"> &#39;Elev&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb18-4"><a href="raw-site-summaries.html#cb18-4"></a><span class="st">  </span><span class="kw">filter</span>(Key <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Old.e.old&#39;</span>,<span class="st">&#39;New.e.new&#39;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb18-5"><a href="raw-site-summaries.html#cb18-5"></a><span class="st">  </span><span class="kw">group_by</span>(Site,Watershed,Type,Data.Source) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-6"><a href="raw-site-summaries.html#cb18-6"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">summarize</span>(<span class="dt">max=</span><span class="kw">max</span>(value),</span>
<span id="cb18-7"><a href="raw-site-summaries.html#cb18-7"></a>            <span class="dt">min=</span><span class="kw">min</span>(value),</span>
<span id="cb18-8"><a href="raw-site-summaries.html#cb18-8"></a>            <span class="dt">median=</span><span class="kw">round</span>(<span class="kw">median</span>(value),<span class="dv">0</span>),</span>
<span id="cb18-9"><a href="raw-site-summaries.html#cb18-9"></a>            <span class="dt">mean=</span><span class="kw">mean</span>(value),</span>
<span id="cb18-10"><a href="raw-site-summaries.html#cb18-10"></a>            <span class="dt">sd=</span><span class="kw">sd</span>(value),</span>
<span id="cb18-11"><a href="raw-site-summaries.html#cb18-11"></a>            <span class="dt">area=</span><span class="kw">round</span>(<span class="kw">n</span>()<span class="op">*</span><span class="dv">100</span><span class="op">/</span>(<span class="dv">1000</span><span class="op">*</span><span class="dv">1000</span>),<span class="dv">2</span>))<span class="op">%&gt;%</span><span class="st"> </span><span class="co">#km2</span></span>
<span id="cb18-12"><a href="raw-site-summaries.html#cb18-12"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">relief=</span>max<span class="op">-</span>min) </span>
<span id="cb18-13"><a href="raw-site-summaries.html#cb18-13"></a></span>
<span id="cb18-14"><a href="raw-site-summaries.html#cb18-14"></a></span>
<span id="cb18-15"><a href="raw-site-summaries.html#cb18-15"></a><span class="co">#Turn the above long dataset into a wide format. </span></span>
<span id="cb18-16"><a href="raw-site-summaries.html#cb18-16"></a>e.wide &lt;-<span class="st"> </span>elev.summary <span class="op">%&gt;%</span></span>
<span id="cb18-17"><a href="raw-site-summaries.html#cb18-17"></a><span class="st">  </span><span class="kw">ungroup</span>(.) <span class="op">%&gt;%</span></span>
<span id="cb18-18"><a href="raw-site-summaries.html#cb18-18"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Site,Type,Data.Source,mean) <span class="op">%&gt;%</span></span>
<span id="cb18-19"><a href="raw-site-summaries.html#cb18-19"></a><span class="st">  </span><span class="kw">spread</span>(Data.Source,mean) <span class="op">%&gt;%</span></span>
<span id="cb18-20"><a href="raw-site-summaries.html#cb18-20"></a><span class="st">  </span><span class="kw">arrange</span>(Site) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-21"><a href="raw-site-summaries.html#cb18-21"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">elev.change=</span> Current<span class="op">/</span>Historic)<span class="op">%&gt;%</span></span>
<span id="cb18-22"><a href="raw-site-summaries.html#cb18-22"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">Current.elev=</span>Current,<span class="dt">Historic.elev=</span>Historic)</span>
<span id="cb18-23"><a href="raw-site-summaries.html#cb18-23"></a></span>
<span id="cb18-24"><a href="raw-site-summaries.html#cb18-24"></a><span class="co">#Get a relief summary</span></span>
<span id="cb18-25"><a href="raw-site-summaries.html#cb18-25"></a>r.wide &lt;-<span class="st"> </span>elev.summary <span class="op">%&gt;%</span></span>
<span id="cb18-26"><a href="raw-site-summaries.html#cb18-26"></a><span class="st">  </span><span class="kw">ungroup</span>(.) <span class="op">%&gt;%</span></span>
<span id="cb18-27"><a href="raw-site-summaries.html#cb18-27"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Site,Type,Data.Source,relief) <span class="op">%&gt;%</span></span>
<span id="cb18-28"><a href="raw-site-summaries.html#cb18-28"></a><span class="st">  </span><span class="kw">spread</span>(Data.Source,relief) <span class="op">%&gt;%</span></span>
<span id="cb18-29"><a href="raw-site-summaries.html#cb18-29"></a><span class="st">  </span><span class="kw">arrange</span>(Site) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-30"><a href="raw-site-summaries.html#cb18-30"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">relief.change=</span> Current<span class="op">/</span>Historic)<span class="op">%&gt;%</span></span>
<span id="cb18-31"><a href="raw-site-summaries.html#cb18-31"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">Current.relief=</span>Current,<span class="dt">Historic.relief=</span>Historic)</span>
<span id="cb18-32"><a href="raw-site-summaries.html#cb18-32"></a></span>
<span id="cb18-33"><a href="raw-site-summaries.html#cb18-33"></a></span>
<span id="cb18-34"><a href="raw-site-summaries.html#cb18-34"></a><span class="co">#Get the area data from above. </span></span>
<span id="cb18-35"><a href="raw-site-summaries.html#cb18-35"></a>area.wide &lt;-<span class="st"> </span>elev.summary <span class="op">%&gt;%</span></span>
<span id="cb18-36"><a href="raw-site-summaries.html#cb18-36"></a><span class="st">  </span><span class="kw">ungroup</span>(.) <span class="op">%&gt;%</span></span>
<span id="cb18-37"><a href="raw-site-summaries.html#cb18-37"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Site,Type,Data.Source,area) <span class="op">%&gt;%</span></span>
<span id="cb18-38"><a href="raw-site-summaries.html#cb18-38"></a><span class="st">  </span><span class="kw">spread</span>(Data.Source,area) <span class="op">%&gt;%</span></span>
<span id="cb18-39"><a href="raw-site-summaries.html#cb18-39"></a><span class="st">  </span><span class="kw">arrange</span>(Site) <span class="op">%&gt;%</span></span>
<span id="cb18-40"><a href="raw-site-summaries.html#cb18-40"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">area.change=</span> Current<span class="op">/</span>Historic)<span class="op">%&gt;%</span></span>
<span id="cb18-41"><a href="raw-site-summaries.html#cb18-41"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">Current.area=</span>Current,<span class="dt">Historic.area=</span>Historic)</span></code></pre></div>
</div>
<div id="slope" class="section level3">
<h3><span class="header-section-number">5.1.2</span> Slope</h3>
<p>Slope changes dramatically in mining landscapes and those changes are calculated here.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="raw-site-summaries.html#cb19-1"></a><span class="co">#Calculate summary statistics for each watershed and data type </span></span>
<span id="cb19-2"><a href="raw-site-summaries.html#cb19-2"></a>slope.summary &lt;-<span class="st"> </span>long.df <span class="op">%&gt;%</span></span>
<span id="cb19-3"><a href="raw-site-summaries.html#cb19-3"></a><span class="st">  </span><span class="kw">filter</span>(Data <span class="op">==</span><span class="st"> &#39;Slope&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb19-4"><a href="raw-site-summaries.html#cb19-4"></a><span class="st">  </span><span class="kw">filter</span>(fdr.type<span class="op">==</span><span class="st">&#39;f.inf&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb19-5"><a href="raw-site-summaries.html#cb19-5"></a><span class="st">  </span><span class="kw">group_by</span>(Site,Watershed,Type,Data.Source) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-6"><a href="raw-site-summaries.html#cb19-6"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">summarize</span>(<span class="dt">max=</span><span class="kw">max</span>(value),</span>
<span id="cb19-7"><a href="raw-site-summaries.html#cb19-7"></a>            <span class="dt">min=</span><span class="kw">min</span>(value),</span>
<span id="cb19-8"><a href="raw-site-summaries.html#cb19-8"></a>            <span class="dt">median=</span><span class="kw">round</span>(<span class="kw">median</span>(value),<span class="dv">2</span>),</span>
<span id="cb19-9"><a href="raw-site-summaries.html#cb19-9"></a>            <span class="dt">mean=</span><span class="kw">mean</span>(value),</span>
<span id="cb19-10"><a href="raw-site-summaries.html#cb19-10"></a>            <span class="dt">sd=</span><span class="kw">sd</span>(value)) <span class="op">%&gt;%</span></span>
<span id="cb19-11"><a href="raw-site-summaries.html#cb19-11"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">relief=</span>max<span class="op">-</span>min) </span>
<span id="cb19-12"><a href="raw-site-summaries.html#cb19-12"></a></span>
<span id="cb19-13"><a href="raw-site-summaries.html#cb19-13"></a></span>
<span id="cb19-14"><a href="raw-site-summaries.html#cb19-14"></a><span class="co">#Widen that data. </span></span>
<span id="cb19-15"><a href="raw-site-summaries.html#cb19-15"></a>s.wide &lt;-<span class="st"> </span>slope.summary <span class="op">%&gt;%</span></span>
<span id="cb19-16"><a href="raw-site-summaries.html#cb19-16"></a><span class="st">  </span><span class="kw">ungroup</span>(.) <span class="op">%&gt;%</span></span>
<span id="cb19-17"><a href="raw-site-summaries.html#cb19-17"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Site,Type,Data.Source,median) <span class="op">%&gt;%</span></span>
<span id="cb19-18"><a href="raw-site-summaries.html#cb19-18"></a><span class="st">  </span><span class="kw">spread</span>(Data.Source,median) <span class="op">%&gt;%</span></span>
<span id="cb19-19"><a href="raw-site-summaries.html#cb19-19"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">slope.change=</span> Current<span class="op">/</span>Historic)<span class="op">%&gt;%</span></span>
<span id="cb19-20"><a href="raw-site-summaries.html#cb19-20"></a><span class="st">  </span><span class="kw">arrange</span>(Site) <span class="op">%&gt;%</span></span>
<span id="cb19-21"><a href="raw-site-summaries.html#cb19-21"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">Current.slope=</span>Current,<span class="dt">Historic.slope=</span>Historic)</span></code></pre></div>
</div>
<div id="drainage-density" class="section level3">
<h3><span class="header-section-number">5.1.3</span> Drainage density</h3>
<p>Our previous work has identified 1000 pixels has an approximate drainage area for the initiation of channels.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="raw-site-summaries.html#cb20-1"></a>drainage.density &lt;-<span class="st"> </span>long.df <span class="op">%&gt;%</span></span>
<span id="cb20-2"><a href="raw-site-summaries.html#cb20-2"></a><span class="st">  </span><span class="kw">filter</span>(Data <span class="op">==</span><span class="st"> &#39;UAA&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb20-3"><a href="raw-site-summaries.html#cb20-3"></a><span class="st">  </span><span class="kw">filter</span>(fdr.type<span class="op">==</span><span class="st">&#39;f.inf&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb20-4"><a href="raw-site-summaries.html#cb20-4"></a><span class="st">  </span><span class="kw">group_by</span>(Site,Watershed,Type,Data.Source) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb20-5"><a href="raw-site-summaries.html#cb20-5"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">summarize</span>(<span class="dt">drainage.length =</span> <span class="kw">length</span>(<span class="kw">which</span>(value <span class="op">&gt;</span><span class="st"> </span><span class="dv">1000</span>)),</span>
<span id="cb20-6"><a href="raw-site-summaries.html#cb20-6"></a>                   <span class="dt">drainage.area=</span><span class="kw">n</span>(),</span>
<span id="cb20-7"><a href="raw-site-summaries.html#cb20-7"></a>                   <span class="dt">drainage.density=</span><span class="kw">round</span>(drainage.length<span class="op">/</span>drainage.area,<span class="dv">3</span>))</span>
<span id="cb20-8"><a href="raw-site-summaries.html#cb20-8"></a></span>
<span id="cb20-9"><a href="raw-site-summaries.html#cb20-9"></a></span>
<span id="cb20-10"><a href="raw-site-summaries.html#cb20-10"></a></span>
<span id="cb20-11"><a href="raw-site-summaries.html#cb20-11"></a>d.wide &lt;-<span class="st"> </span>drainage.density <span class="op">%&gt;%</span></span>
<span id="cb20-12"><a href="raw-site-summaries.html#cb20-12"></a><span class="st">  </span><span class="kw">ungroup</span>(.) <span class="op">%&gt;%</span></span>
<span id="cb20-13"><a href="raw-site-summaries.html#cb20-13"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Site,Type,Data.Source,drainage.density) <span class="op">%&gt;%</span></span>
<span id="cb20-14"><a href="raw-site-summaries.html#cb20-14"></a><span class="st">  </span><span class="kw">spread</span>(Data.Source,drainage.density) <span class="op">%&gt;%</span></span>
<span id="cb20-15"><a href="raw-site-summaries.html#cb20-15"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">DD.change=</span> Current<span class="op">/</span>Historic)<span class="op">%&gt;%</span></span>
<span id="cb20-16"><a href="raw-site-summaries.html#cb20-16"></a><span class="st">  </span><span class="kw">arrange</span>(Site) <span class="op">%&gt;%</span></span>
<span id="cb20-17"><a href="raw-site-summaries.html#cb20-17"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">Current.DD=</span>Current,<span class="dt">Historic.DD=</span>Historic)</span></code></pre></div>
</div>
</div>
<div id="total-summary" class="section level2">
<h2><span class="header-section-number">5.2</span> Total summary</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="raw-site-summaries.html#cb21-1"></a>site.summary &lt;-<span class="st"> </span>pmine.dat <span class="op">%&gt;%</span></span>
<span id="cb21-2"><a href="raw-site-summaries.html#cb21-2"></a><span class="st">  </span><span class="kw">left_join</span>(e.wide,<span class="dt">by=</span><span class="kw">c</span>(<span class="st">&#39;Site&#39;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb21-3"><a href="raw-site-summaries.html#cb21-3"></a><span class="st">  </span><span class="kw">left_join</span>(area.wide,<span class="dt">by=</span><span class="kw">c</span>(<span class="st">&#39;Site&#39;</span>,<span class="st">&#39;Type&#39;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb21-4"><a href="raw-site-summaries.html#cb21-4"></a><span class="st">  </span><span class="kw">left_join</span>(s.wide,<span class="dt">by=</span><span class="kw">c</span>(<span class="st">&#39;Site&#39;</span>,<span class="st">&#39;Type&#39;</span>))  <span class="op">%&gt;%</span></span>
<span id="cb21-5"><a href="raw-site-summaries.html#cb21-5"></a><span class="st">  </span><span class="kw">left_join</span>(d.wide,<span class="dt">by=</span><span class="kw">c</span>(<span class="st">&#39;Site&#39;</span>,<span class="st">&#39;Type&#39;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb21-6"><a href="raw-site-summaries.html#cb21-6"></a><span class="st">  </span><span class="kw">left_join</span>(r.wide,<span class="dt">by=</span><span class="kw">c</span>(<span class="st">&#39;Site&#39;</span>,<span class="st">&#39;Type&#39;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb21-7"><a href="raw-site-summaries.html#cb21-7"></a><span class="st">  </span><span class="kw">select</span>(Site,Type,<span class="kw">everything</span>()) <span class="op">%&gt;%</span></span>
<span id="cb21-8"><a href="raw-site-summaries.html#cb21-8"></a><span class="st">  </span><span class="kw">mutate_if</span>(is.numeric,round,<span class="dv">2</span>)</span>
<span id="cb21-9"><a href="raw-site-summaries.html#cb21-9"></a></span>
<span id="cb21-10"><a href="raw-site-summaries.html#cb21-10"></a></span>
<span id="cb21-11"><a href="raw-site-summaries.html#cb21-11"></a>flip_summary &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(<span class="kw">cbind</span>(<span class="dt">nms =</span> <span class="kw">names</span>(site.summary), <span class="kw">t</span>(site.summary))) <span class="op">%&gt;%</span></span>
<span id="cb21-12"><a href="raw-site-summaries.html#cb21-12"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">nms =</span> <span class="kw">gsub</span>(<span class="st">&#39;</span><span class="ch">\\</span><span class="st">.&#39;</span>,<span class="st">&#39; &#39;</span>,.<span class="op">$</span>nms))</span>
<span id="cb21-13"><a href="raw-site-summaries.html#cb21-13"></a></span>
<span id="cb21-14"><a href="raw-site-summaries.html#cb21-14"></a></span>
<span id="cb21-15"><a href="raw-site-summaries.html#cb21-15"></a><span class="kw">write_csv</span>(flip_summary,<span class="dt">path=</span><span class="st">&#39;Figures2018/SiteSummary.csv&#39;</span>)</span></code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="analysis-and-figures.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="process-zones-with-slope-area-and-cumulative-area-distribution.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
